version: 1.0
runtime: ruby31

build:
  env:
    - name: BUNDLE_WITHOUT
      value: "development:test"
  commands:
    - bundle config set deployment 'true'
    - bundle install -j4

run:
  runtime-version: 3.1.7
  pre-run:
    - dnf -y install mariadb-connector-c mariadb-connector-c-devel gcc make pkgconf-pkg-config
  command: bundle exec rails server -b 0.0.0.0 -p 8080
  network:
    port: 8080
